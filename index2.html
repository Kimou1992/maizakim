<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Update Google Sheets</title>
</head>
<body>
  <h1>Update Google Sheets Row</h1>

  <form id="update-form">
    <label for="id">ID (required):</label><br>
    <input type="text" id="id" name="id" placeholder="Enter ID" required><br><br>

    <label for="sellAd">Sell Ad:</label><br>
    <input type="text" id="sellAd" name="sellAd" placeholder="Enter Sell Ad" required><br><br>

    <label for="buyAd">Buy Ad:</label><br>
    <input type="text" id="buyAd" name="buyAd" placeholder="Enter Buy Ad" required><br><br>

    <label for="withAd">With Ad:</label><br>
    <input type="text" id="withAd" name="withAd" placeholder="Enter With Ad" required><br><br>

    <label for="lstUpdt">Last Updated:</label><br>
    <input type="text" id="lstUpdt" name="lstUpdt" placeholder="Enter Last Updated (e.g., 2025-01-19)" required><br><br>

    <button type="submit">Update Row</button>
  </form>

  <div id="response" style="margin-top: 20px; color: green;"></div>
  <div id="error" style="margin-top: 20px; color: red;"></div>

  <script>
    // إرسال البيانات باستخدام POST
    document.getElementById('update-form').addEventListener('submit', async function (event) {
      event.preventDefault();

      // جلب القيم من الحقول
      const data = {
        id: document.getElementById('id').value,
        sellAd: document.getElementById('sellAd').value,
        buyAd: document.getElementById('buyAd').value,
        withAd: document.getElementById('withAd').value,
        lstUpdt: document.getElementById('lstUpdt').value,
      };

      try {
        // إرسال الطلب إلى الخادم
        const response = await fetch('https://maizakim.onrender.com/update', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(data),
        });

        const result = await response.json();

        // عرض النتيجة
        if (response.ok) {
          document.getElementById('response').innerText = 'Data updated successfully!';
          document.getElementById('error').innerText = '';
        } else {
          document.getElementById('error').innerText = 'Error: ' + (result.error || 'Unknown error');
          document.getElementById('response').innerText = '';
        }
      } catch (error) {
        document.getElementById('error').innerText = 'Error: ' + error.message;
        document.getElementById('response').innerText = '';
      }
    });
  </script>
</body>
</html>
