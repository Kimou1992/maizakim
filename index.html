<!DOCTYPE html>
<html lang="ar">
  <head>
    <meta charset="utf-8">
    <title>ربط محفظة TON</title>
    <script src="https://unpkg.com/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js" defer></script>
  </head>
  <body>
    <h2>ربط محفظتك</h2>
    <button id="connectButton">ربط المحفظة</button>
    
    <script>
      // التأكد من أن Telegram WebApp API متاح
      if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
        const connector = new TonConnectSDK.TonConnect();

        document.getElementById('connectButton').addEventListener('click', async () => {
          try {
            // محاولة الاتصال بالمحفظة عبر TonConnect
            const wallet = await connector.connect();
            alert(`تم ربط المحفظة بنجاح! العنوان: ${wallet.address}`);

            // التفاعل مع Telegram WebApp API
            Telegram.WebApp.expand();  // توسيع الواجهة لتناسب التطبيق
          } catch (error) {
            console.error("فشل ربط المحفظة:", error);
            alert("حدث خطأ أثناء ربط المحفظة.");
          }
        });
      } else {
        alert("Telegram WebApp API غير متاح.");
      }
    </script>
  </body>
</html>
